#import "lib/sci-book.typ": *
#show: doc => conf(
  title: "æœ€ä¼˜æ§åˆ¶",
  author: ("ivaquero"),
  header-cap: "ç°ä»£æ§åˆ¶ç†è®º",
  footer-cap: "github@ivaquero",
  outline-on: false,
  doc,
)

= æ€§èƒ½æŒ‡æ ‡
<æ€§èƒ½æŒ‡æ ‡>

== ä½ç½®æ§åˆ¶
<ä½ç½®æ§åˆ¶>

å¯¹ç‹¬è½®è½¦æ¨¡å‹

#figure(
  image("./images/model/unicycle.drawio.png", width: 40%),
  caption: [ç‹¬è½®è½¦],
  supplement: "å›¾",
)

ä»¤

#block(
  height: 5em,
  columns(3)[
    - ä½ç½®
      - $x_1(t) = p_x(t)$
      - $x_2(t) = p_y(t)$
    - é€Ÿåº¦
      - $x_3(t) = v(t)$
    \
    - è§’é€Ÿåº¦
      - $x_4(t) = Î¸(t)$
  ],
)

äºæ˜¯æœ‰

$ ğ’™(t) = mat(delim: "[", p_x(t); p_y(t); v(t); Î¸(t)) $

è®¾è®¡è¾“å…¥ï¼ˆæ§åˆ¶é‡ï¼‰

$ ğ’–(t) = mat(delim: "[", u_1(t); u_2(t)) = mat(delim: "[", Î±_1(t); Ï‰_2(t)) $

å¯å¾—

$
  dv(ğ’™(t), t) =
  mat(delim: "[", v(t) cos Î¸(t); v(t) sin Î¸(t); 0; 0) +
  mat(delim: "[", 1; 0; Î±(t); Ï‰(t)) = f(ğ’™(t)), ğ’–(t)
$

== ç¦»æ•£åŒ–
<ç¦»æ•£åŒ–>

å¯¹æ—¶é—´$t$ç¦»æ•£åŒ–ï¼Œæœ‰

$ ğ’™[k + 1] = f_d [ğ’™[k], ğ’–[k]] $

è®¾ç›®æ ‡ä¸º

$ ğ’™_d = mat(delim: "[", p_(x d)(t); p_(y d)(t); 0; 0) $

è®¾è®¡ä»£ä»·å‡½æ•°ï¼ˆæ€§èƒ½æŒ‡æ ‡ï¼‰

$
  J &= âˆ‘_(i=1)^4 (x_i [N] - x_(i d))^2\
  &= (ğ’™[N] - ğ’™_d)^(âŠ¤)(ğ’™[N] - ğ’™_d)
$

å¯»æ‰¾åˆé€‚çš„æ§åˆ¶ç­–ç•¥ï¼Œä½¿$J$æœ€å°

$
  ğ’–^* =[ğ’–[0], ğ’–[1], ğ’–[2], â€¦, ğ’–[N-1]] \
  ğ’–^* = "arg" min J
$

è€ƒè™‘å®é™…å› ç´ ï¼Œæ¯ä¸ªçŠ¶æ€å˜é‡çš„é‡è¦æ€§ä¸åŒï¼Œäºæ˜¯æœ‰

$
  J
  &= 1 / 2 (ğ’™[N] - ğ’™_d [N])^(âŠ¤) ğ‘º (ğ’™[N] - ğ’™_d [N])\
  &= 1 / 2 (ğ’™[N] - ğ’™_d [N])^(âŠ¤)
  mat(delim: "[",
  S_1, med, med, med;
  med, S_2, med, med;
  med, , S_3, med;
  med, med, med, S_4)(ğ’™[N] - ğ’™_d [N])\
  &= 1 / 2 âˆ‘_(i=1)^4 S_i (x_i [N] - x_(i d) [N])^2\
  &= 1 / 2 norm(ğ’™[N] - ğ’™_d [N])_ğ‘º^2
$

å…¶ä¸­ï¼Œ$ğ‘º_n$ä¸ºåŠæ­£å®šå¯¹ç§°é˜µï¼Œ$1/2 norm(ğ’™[N] - ğ’™_d [N])_ğ‘º^2$ç§°æœ«ç«¯ä»£ä»·ï¼Œ$n$ä¸ºè‡ªå˜é‡ä¸ªæ•°ã€‚

== å®é™…çº¦æŸ
<å®é™…çº¦æŸ>

è€ƒè™‘ç‰©ç†çº¦æŸï¼ˆç¡¬çº¦æŸï¼‰

- é€Ÿåº¦èŒƒå›´
- æ§åˆ¶é‡

åŒæ—¶ï¼Œè€ƒè™‘èƒ½è€—ï¼Œæœ‰

$
  J = 1 / 2 lr(norm(ğ’™[N] - ğ’™_d [N]))_ğ‘º^2 + 1 / 2 âˆ‘_(k=1)^(N - 1) norm(ğ’–[k])_ğ‘¹^2
$

å…¶ä¸­ï¼Œ$ğ‘¹ = mat(delim: "[", r_1, med; med, r_2)$ä¸ºæ­£å®šå¯¹ç§°é˜µã€‚ç”±äºå…¶é€šè¿‡ç®—æ³•å¯¹$J$è¿›è¡Œçº¦æŸï¼Œæ•…å±äºè½¯çº¦æŸ

- ä¸è€ƒè™‘èƒ½è€—ï¼Œåˆ™$ğ‘º â‰« ğ‘¹$
- å…³æ³¨èŠ‚èƒ½ï¼Œåˆ™$ğ‘¹ â‰« ğ‘º$

#tip[
  $ğ‘¹_(p Ã— p)$æ­£å®šæ—¶ï¼Œ$J$æ–¹æœ‰æœ€å°å€¼ã€‚
]

åœ¨ç¡¬ã€è½¯çº¦æŸçš„åŸºç¡€ä¸Šï¼Œå¯¹è½¨è¿¹è¿›è¡Œçº¦æŸï¼Œæœ‰

$
  J = 1 / 2 norm(ğ’™[N] - ğ’™_d [N])_ğ‘º^2 + 1 / 2 âˆ‘_(k=1)^(N - 1)(norm(ğ’™[k]) - ğ’™_d [k])_ğ‘¸^2 + norm(ğ’–[k])_ğ‘¹^2
$

å…¶ä¸­ï¼Œ$ğ‘¸_(n Ã— n)$ä¸ºåŠæ­£å®šå¯¹è§’é˜µï¼Œ$1/2 norm(ğ’™[k] - ğ’™_d [k])_ğ‘¸^2$ç§°è¿è¡Œä»£ä»·ã€‚

åˆè½¨è¿¹ä¸­é—´ç‚¹ï¼Œ$p_x[k], p_y[k] in p_x^*[k], p_y^*[k]$ï¼Œåˆ™

$ ğ’™_1[k], ğ’™_2[k] in X^* $

ç§°ä¸ºå®¹è®¸è½¨è¿¹ï¼ˆadmissible trajectoryï¼‰ã€‚è€Œæ§åˆ¶é‡çº¦æŸ

$ ğ’–^* âˆˆ Î© $

ç§°ä¸ºå®¹è®¸æ§åˆ¶åŸŸï¼ˆset of admissible controlï¼‰ã€‚

= åŠ¨æ€è§„åˆ’
<åŠ¨æ€è§„åˆ’>

åŠ¨æ€è§„åˆ’ç”± Richard Bellman äº 1966 å¹´åœ¨ã€ŠScienceã€‹ä¸Šå‘è¡¨ã€‚

== é«˜åº¦æ§åˆ¶
<é«˜åº¦æ§åˆ¶>

å¯¹æ— äººæœºæ¨¡å‹ï¼Œç°éœ€è¦æ±‚è§£ï¼Œä»åœ°é¢å‡é«˜è‡³ 10m çš„æœ€çŸ­æ—¶é—´

#figure(
  diagram(
    node-fill: gradient.radial(white, blue, radius: 100%),
    node-stroke: blue,
    node((2, 0), [m], shape: rect),
    node((2, 1), [mg], fill: none, stroke: none),
    node((2, -1), [f(t)], fill: none, stroke: none),
    node((1.2, -.5), [h(t)], fill: none, stroke: none),
    edge((2, 0), "u", "->", snap-to: (<bar>, auto)),
    edge((2, 0), "d", "->", snap-to: (<bar>, auto)),
    edge((2, 0), "l", "-"),
    edge((1.5, 0), "u", "->"),
  ),
  caption: [æ— äººæœºæ¨¡å‹],
  supplement: "\nå›¾",
)

#block(
  height: 9em,
  columns()[
    åˆå§‹å’Œæœ€ç»ˆæ¡ä»¶ä¸º
    - $h(0) = 0$
    - $dot(h)(0) = 0$
    - $h_f = 10$
    - $dot(h)_f = 0$
    ç‰©ç†çº¦æŸä¸º
    - $a(t) in[-3, 2]$
    - $v(t) in[0, 3]$
  ],
)

å…³ç³»å¼ä¸º

$ m dot.double(h)(t) = f(t) - m g $

æ§åˆ¶é‡ä¸º

$ u = 1 / m (f(t)) - m g = a $

å…¶ä¸­ï¼Œ$f(t) = F(v_("motor")$

äºæ˜¯æœ‰

- $macron(v) = 1 / 2 (v (k)) + v (k + 1))$
- $t = dd(x) / 1 / 2 (v_k + v_(k + 1))$
- $a = (v_k + v_(k + 1)) / t$

\
#let code1 = read("matlab/dynamic_prog.m")
#code(code1, lang: "matlab", breakable: true)

== ç­–ç•¥
<ç­–ç•¥>

- ä»¥ç»ˆä¸ºå§‹
- ç©ºé—´æ¢æ—¶é—´
