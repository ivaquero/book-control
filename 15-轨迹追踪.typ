#import "lib/sci-book.typ": *
#show: doc => conf(
  title: "è½¨è¿¹è¿½è¸ª",
  author: ("ivaquero"),
  header-cap: "ç°ä»£æ§åˆ¶ç†è®º",
  footer-cap: "github@ivaquero",
  outline-on: false,
  doc,
)

= å¼¹ç°§æŒ¯åŠ¨é˜»å°¼ç³»ç»Ÿ

å¯¹å¼¹ç°§æŒ¯åŠ¨é˜»å°¼ç³»ç»Ÿ

#figure(
  image("images/model/vibration.drawio.png", width: 40%),
  caption: "",
  supplement: [å›¾],
)

- å½“ç›®æ ‡$ğ’™_d = vec(delim: "[", 0, 0)$ï¼Œä¸ºç»å…¸ LQR é—®é¢˜
- å½“ç›®æ ‡$ğ’™_d = vec(delim: "[", 1, 0)$æˆ–ä¸ä¸º$ğŸ$æ—¶ï¼Œä¸ºè½¨è¿¹è¿½è¸ªé—®é¢˜

å…¶ç¦»æ•£çº¿æ€§ç³»ç»Ÿæ–¹ç¨‹ä¸º

$ ğ’™_([k+1]) = ğ‘¨ ğ’™_([k]) + ğ‘© ğ’–_([k]) $ <sys>

è‹¥è¿½è¸ªç›®æ ‡ä¸º

$ ğ’™_(d[k+1]) = ğ‘¨_D ğ’™_(d[k]) $

è®¾$ğ’™_d$ä¸ºå¸¸æ•°å‘é‡ï¼Œåˆ™ä»¤

$ ğ’†_([k]) = ğ’™_([k]) - ğ’™_(d[k]) = underbrace(mat(delim: "[", ğ‘°, -ğ‘°), "ğ‘ªâ‚") vec(delim: "[", ğ’™_([k]), ğ’™_(d[k])) $

æ­¤æ—¶ï¼Œç›®æ ‡å€¼$ğ’†_(d[k]) = 0$ï¼Œé—®é¢˜è½¬åŒ–ä¸º LQR é—®é¢˜ã€‚äºæ˜¯æœ‰

$
  underbrace(vec(delim: "[", ğ’™_([k+1]), ğ’™_(d[k+1])), "ğ’™â‚[k+1]") = underbrace(dmat(delim: "[", ğ‘¨, ğ‘¨_0), "ğ‘¨â‚") underbrace(vec(delim: "[", ğ’™_([k]), ğ’™_(d[k])), "ğ’™â‚[k]") + underbrace(vec(delim: "[", ğ‘©, ğŸ), "ğ‘©â‚") ğ’–
$

è¿›ä¸€æ­¥æœ‰

$ ğ’†_([k]) = ğ‘ª_a ğ’™_(a[k]) $

å¯¹åº”çš„ä»£ä»·å‡½æ•°ä¸º

$
  J &= 1 / 2 ğ’†^(âŠ¤)_([N]) ğ‘º ğ’†_([N]) + 1 / 2 âˆ‘_(k=0)^(N-1) (ğ’†^(âŠ¤)_([k]) ğ‘¸ ğ’†_([k]) + ğ’–^(âŠ¤)_([k]) ğ‘¹ ğ’–_([k]))\
  &= 1 / 2 (ğ‘ª_a ğ’™_(a[k]))^(âŠ¤)_([N]) ğ‘º (ğ‘ª_a ğ’™_(a[k])) + 1 / 2 âˆ‘_(k=0)^(N-1) (
    (ğ‘ª_a ğ’™_(a[k]))^(âŠ¤)_([k]) ğ‘¸ (ğ‘ª_a ğ’™_(a[k]))_([k]) + ğ’–^(âŠ¤)_([k]) ğ‘¹ ğ’–_([k])
  )\
  &= 1 / 2 ğ’™_(a[k])^(âŠ¤) ğ‘º_a ğ’™_(a[k]) + 1 / 2 âˆ‘_(k=0)^(N-1) (ğ’™_(a[k])^(âŠ¤) ğ‘¸_a ğ’™_(a[k]) + ğ’–^(âŠ¤)_([k]) ğ‘¹ ğ’–_([k]))
$ <cost>

ä¸Šå¼æˆåŠŸå°†è¿½è¸ªé—®é¢˜è½¬åŒ–ä¸ºäº† LQR é—®é¢˜ã€‚ä½†å½“$ğ‘¹$è¿‡å¤§ï¼Œåˆ™ç³»ç»Ÿå°†èººå¹³ï¼Œæ— æ³•è¿›è¡Œè¿½è¸ªã€‚

== éé›¶å¸¸æ•°ç¨³æ€è¾“å…¥

å¯¹è½¨è¿¹è¿½è¸ªé—®é¢˜ï¼Œæœ‰

$ ğ’™_(a[k+1]) = ğ‘¨_D ğ’™_(d[k]) $ <aug>

è€ƒè™‘ç‰¹ä¾‹ï¼Œå¦‚æ’æ¸©æˆ–åŒ€é€Ÿæ§åˆ¶ï¼Œæ­¤æ—¶$ğ‘¨_D = ğ‘°$ï¼Œå³

$ ğ’™_(d[k]) = ğ’™_d $

ä¸”$ğ’™_d$å¤„ï¼Œç³»ç»Ÿå¤„äºç¨³æ€ï¼Œå³è¾“å…¥$ğ’–$ä½¿ç³»ç»Ÿæ€»èƒ½å¾—åˆ°$ğ’™_d$ã€‚äºæ˜¯

$ ğ’™_d = ğ‘¨ ğ’™_d + ğ‘© ğ’–_d $

å¯å¾—

$ (ğ‘° - ğ‘¨)ğ’™_d = ğ‘© ğ’–_d $

å®šä¹‰ç¨³æ€è¯¯å·®

$ Î´ ğ’–_([k]) = ğ’–_([k]) - ğ’–_([d]) $

ä»£å…¥@sysï¼Œå¯å¾—

$
  ğ’™_([k+1]) &= ğ‘¨ ğ’™_([k]) + ğ‘©(Î´ ğ’–_([k]) + ğ’–_([d])) \
  &= ğ‘¨ ğ’™_([k]) + ğ‘© Î´ ğ’–_([k]) + (ğ‘° - ğ‘¨) ğ’™_d
$

æ„é€ å¢å¹¿çŸ©é˜µ

$
  ğ’™_(a[
    k+1
  ]) = vec(delim: "[", ğ’™_([k+1]), ğ’™_d) = underbrace(mat(delim: "[", ğ‘¨, ğ‘° - ğ‘¨; ğŸ, ğ‘°), "ğ‘¨â‚") vec(delim: "[", ğ’™_([k]), ğ’™_d) + underbrace(vec(delim: "[", ğ‘©, ğŸ), "ğ‘©â‚") Î´ ğ’–_([
    k
  ])
$

ä»¤

$
  ğ’†_([k]) = ğ’™_([k]) - ğ’™_d = underbrace(mat(delim: "[", ğ‘°, -ğ‘°), "ğ‘ªâ‚") underbrace(vec(delim: "[", ğ’™_([k]), ğ’™_d), "ğ’™â‚[k]")
$

ä»£å…¥@costï¼Œå¾—

$
  J &= 1 / 2 ğ’™^(âŠ¤)_(a[N]) ğ‘ª^(âŠ¤)_a ğ‘º ğ‘ª_a ğ’™_(a[N]) + 1 / 2 âˆ‘_(k=0)^(N-1) (
    ğ’™^(âŠ¤)_(a[k]) ğ‘ª^(âŠ¤)_a ğ‘¸ ğ‘ª_a ğ’™_(a[k]) + Î´ ğ’–^(âŠ¤)_([k]) ğ‘¹ Î´ ğ’–_([k])
  )
$ <cost2>

è¿™å°±å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„ LQR é—®é¢˜ã€‚

#figure(
  image("images/block/lqr-trk-const.drawio.png", width: 40%),
  caption: "è½¨è¿¹è¿½è¸ª LQR ç³»ç»Ÿ",
  supplement: [å›¾],
)

== éé›¶çŸ©é˜µç¨³æ€è¾“å…¥

å¯¹éå¸¸æ•°è¾“å…¥ï¼Œ@aug ä¸­$ğ‘¨_D â‰  ğ‘°$ã€‚æ­¤æ—¶ï¼Œå®šä¹‰è¾“å…¥å¢é‡

$ Î” ğ’–_([k]) = underbrace(ğ’–_([k]) - ğ’–_([k-1]), "å¹³æ»‘è¾“å…¥çš„å˜åŒ–") $

ä»£äºº@sysï¼Œå¯å¾—

$ ğ’™_([k+1]) = ğ‘¨ ğ’™_([k]) + ğ‘© ğ’–_([k]) + ğ‘© ğ’–_([k-1]) $

è®¾å¢å¹¿å‘é‡

$ ğ’™_(a[k]) = vec(delim: "[", ğ’™_([k]), ğ’™_([d]), ğ’–_([k-1])) $

äºæ˜¯

$ ğ’†_([k]) = ğ’™_([k]) - ğ’™_d = mat(delim: "[", ğ‘°, -ğ‘°, ğŸ) vec(delim: "[", ğ’™_([k]), ğ’™_([d]), ğ’–_([k-1])) = ğ‘ª_a ğ’™_(a[k]) $

è¿›ä¸€æ­¥æœ‰

$
  ğ’™_(a[k+1]) = underbrace(mat(delim: "[", ğ‘¨, ğŸ, ğ‘©; ğŸ, ğ‘¨_D, ğŸ; ğŸ, ğŸ, ğ‘°), "ğ‘¨â‚") ğ’™_(a[
    k
  ]) + underbrace(vec(delim: "[", ğ‘©, ğŸ, ğ‘°), "ğ‘©â‚") Î” ğ’–_([k])
$

ç±»æ¯”@cost2ï¼Œå¾—

$
  J = 1 / 2 ğ’™^(âŠ¤)_(a[N]) ğ‘ª^(âŠ¤)_a ğ‘º ğ‘ª_a ğ’™_(a[N]) + 1 / 2 âˆ‘_(k=0)^(N-1) (
    ğ’™^(âŠ¤)_(a[k]) ğ‘ª^(âŠ¤)_a ğ‘¸ ğ‘ª_a ğ’™_(a[k]) + Î” ğ’–^(âŠ¤)_([k]) ğ‘¹ Î” ğ’–_([k])
  )
$

#figure(
  image("images/block/lqr-trk-var.drawio.png", width: 40%),
  caption: "",
  supplement: [å›¾],
)
