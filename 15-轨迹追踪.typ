#import "lib/lib.typ": *
#show: chapter-style.with(title: "è½¨è¿¹è¿½è¸ª", info: info)

= é’Ÿæ‘†ç³»ç»Ÿ
<é’Ÿæ‘†ç³»ç»Ÿ>

== ç³»ç»Ÿæ„æˆ

å¯¹ç³»ç»Ÿ

$ dot.double(Ï•) - g / L Ï• + 1 / L dot(Î´) = 0 $

ä»¤$x_1 = Ï•, x_2 = dot(Ï•), u = 1 / L dot.double(Î´)$

å¯å¾—

$
  mat(delim: "[", dot(x)_1; dot(x)_2) = mat(delim: "[", 0, 1; g / L, 0) mat(delim: "[", x_1; x_2) + mat(delim: "[", 0; - 1) u
$

åˆä»¤

$ u = -mat(delim: "[", k_1, k_2) mat(delim: "[", x_1; x_2) $

å…¶å¼€ç¯å¹³è¡¡ç‚¹

$
  dot(x)_1 = 0 â‡’ x_2 = 0\
  dot(x)_2 = 0 â‡’ x_1 = 0
$

æ•…å½“$t â†’ âˆ$ï¼Œ$x_1, x_2 â†’ 0$ã€‚

== è¯¯å·®å‡½æ•°

è®¾ç›®æ ‡å€¼$x_(1 d) = 5$ï¼Œåˆ™è¯¯å·®ä¸º$e = x_(1 d) - x_1$ï¼Œäºæ˜¯æœ‰

$ dot(e) = dot(x)_(1 d) - dot(x)_1 = -dot(x)_1 = x_2 $

åˆ

$ dot(x)_2 = g / L x_1 - u = g / L (x_(1 d) - e) - u $

å³

$
  mat(delim: "[", e Ì‡; dot(x)_2) =
  mat(delim: "[", 0, - 1; - g / L, 0)
  mat(delim: "[", e; x_2) +
  mat(delim: "[", 0; - 1) u +
  mat(delim: "[", 0; g / L x_(1 d))
$

å…¶å¼€ç¯å¹³è¡¡ç‚¹

$
  & dot(e) = 0 â‡’ x_(2 f) = 0   \
  & dot(x)_2 = 0 â‡’ e_f = x_1 d
$

ä¸ºæ”¹å˜å¹³è¡¡ç‚¹ï¼Œä»¤$u = -mat(delim: "[", k_1, k_2) mat(delim: "[", e_(x_2); x_2) + e_f$ï¼Œä»£å…¥ï¼Œå¾—

$
  mat(delim: "[", e Ì‡; dot(x)_2) = mat(delim: "[", 0, - 1; - g / L + k_1, k_2) mat(delim: "[", e; x_2)
$

æ­¤æ—¶

- $e_f = 0$
- $x_(2 f) = 0$

è®¾è®¡$k_1, k_2$ï¼Œä»¤$"Re"("eig"(A_("cl"))) < 0$ï¼Œäºæ˜¯ç”±ç‰¹å¾è¡Œåˆ—å¼ä¸º$0$ï¼Œå¾—

$
  mat(delim: "[", Î», 1; g / L - k_1, Î» - k_2) & = Î»^2 - k_2 Î» - g / L + k_1 \
                                              & = Î»^2 + 2 Î» + 1
$

å¾—

- $k_1 = 1 + g / L$
- $k_2 = -2$

ä»£å…¥$u$çš„è¡¨è¾¾å¼ï¼Œå¾—

$ u = -x_d + (1 + g / L) x_1 + 2 x_2 $

= å¼¹ç°§æŒ¯åŠ¨é˜»å°¼ç³»ç»Ÿ

== ç³»ç»Ÿæ„æˆ

å¯¹å¼¹ç°§æŒ¯åŠ¨é˜»å°¼ç³»ç»Ÿ

#figure(
  image("images/model/vibration.drawio.png", width: 40%),
  caption: "å¼¹ç°§æŒ¯åŠ¨é˜»å°¼ç³»ç»Ÿ",
)

- å½“ç›®æ ‡$ğ’™_d = vec(delim: "[", 0, 0)$ï¼Œä¸ºç»å…¸ LQR é—®é¢˜
- å½“ç›®æ ‡$ğ’™_d = vec(delim: "[", 1, 0)$æˆ–ä¸ä¸º$ğŸ$æ—¶ï¼Œä¸ºè½¨è¿¹è¿½è¸ªé—®é¢˜

å…¶ç¦»æ•£çº¿æ€§ç³»ç»Ÿæ–¹ç¨‹ä¸º

$ ğ’™_([k+1]) = ğ‘¨ ğ’™_([k]) + ğ‘© ğ’–_([k]) $ <sys-spring>

è‹¥è¿½è¸ªç›®æ ‡ä¸º

$ ğ’™_(d[k+1]) = ğ‘¨_D ğ’™_(d[k]) $

è®¾$ğ’™_d$ä¸ºå¸¸æ•°å‘é‡ï¼Œåˆ™ä»¤

$
  ğ’†_([k]) = ğ’™_([k]) - ğ’™_(d[k]) = underbrace(mat(delim: "[", ğ‘°, -ğ‘°), "ğ‘ªâ‚") vec(delim: "[", ğ’™_([k]), ğ’™_(d[k]))
$

æ­¤æ—¶ï¼Œç›®æ ‡å€¼$ğ’†_(d[k]) = 0$ï¼Œé—®é¢˜è½¬åŒ–ä¸º LQR é—®é¢˜ã€‚äºæ˜¯æœ‰

$
  underbrace(vec(delim: "[", ğ’™_([k+1]), ğ’™_(d[k+1])), "ğ’™â‚[k+1]") = underbrace(dmat(delim: "[", ğ‘¨, ğ‘¨_0), "ğ‘¨â‚") underbrace(vec(delim: "[", ğ’™_([k]), ğ’™_(d[k])), "ğ’™â‚[k]") + underbrace(vec(delim: "[", ğ‘©, ğŸ), "ğ‘©â‚") ğ’–
$

è¿›ä¸€æ­¥æœ‰

$ ğ’†_([k]) = ğ‘ª_a ğ’™_(a[k]) $

å¯¹åº”çš„ä»£ä»·å‡½æ•°ä¸º

$
  J &= 1 / 2 ğ’†^âŠ¤_([N]) ğ‘º ğ’†_([N]) + 1 / 2 sum_(k=0)^(N-1) (ğ’†^âŠ¤_([k]) ğ‘¸ ğ’†_([k]) + ğ’–^âŠ¤_([k]) ğ‘¹ ğ’–_([k]))\
  &= 1 / 2 (ğ‘ª_a ğ’™_(a[k]))^âŠ¤_([N]) ğ‘º (ğ‘ª_a ğ’™_(a[k])) + 1 / 2 sum_(k=0)^(N-1) ( (ğ‘ª_a ğ’™_(a[k]))^âŠ¤_([k]) ğ‘¸ (ğ‘ª_a ğ’™_(a[k]))_([k]) + ğ’–^âŠ¤_([k]) ğ‘¹ ğ’–_([k]) )\
  &= 1 / 2 ğ’™_(a[k])^âŠ¤ ğ‘º_a ğ’™_(a[k]) + 1 / 2 sum_(k=0)^(N-1) (ğ’™_(a[k])^âŠ¤ ğ‘¸_a ğ’™_(a[k]) + ğ’–^âŠ¤_([k]) ğ‘¹ ğ’–_([k]))
$ <cost-spring>

ä¸Šå¼æˆåŠŸå°†è¿½è¸ªé—®é¢˜è½¬åŒ–ä¸ºäº† LQR é—®é¢˜ã€‚ä½†å½“$ğ‘¹$è¿‡å¤§ï¼Œåˆ™ç³»ç»Ÿå°†èººå¹³ï¼Œæ— æ³•è¿›è¡Œè¿½è¸ªã€‚

== ç¨³æ€éé›¶å¸¸æ•°è¾“å…¥

å¯¹è½¨è¿¹è¿½è¸ªé—®é¢˜ï¼Œæœ‰

$ ğ’™_(a[k+1]) = ğ‘¨_D ğ’™_(d[k]) $ <aug>

è€ƒè™‘ç‰¹ä¾‹ï¼Œå¦‚æ’æ¸©æˆ–åŒ€é€Ÿæ§åˆ¶ï¼Œæ­¤æ—¶$ğ‘¨_D = ğ‘°$ï¼Œå³

$ ğ’™_(d[k]) = ğ’™_d $

ä¸”$ğ’™_d$å¤„ï¼Œç³»ç»Ÿå¤„äºç¨³æ€ï¼Œå³è¾“å…¥$ğ’–$ä½¿ç³»ç»Ÿæ€»èƒ½å¾—åˆ°$ğ’™_d$ã€‚äºæ˜¯

$ ğ’™_d = ğ‘¨ ğ’™_d + ğ‘© ğ’–_d $

å¯å¾—

$ (ğ‘° - ğ‘¨)ğ’™_d = ğ‘© ğ’–_d $

å®šä¹‰ç¨³æ€è¯¯å·®

$ Î´ ğ’–_([k]) = ğ’–_([k]) - ğ’–_([d]) $

ä»£å…¥@sys-springï¼Œå¯å¾—

$
  ğ’™_([k+1]) & = ğ‘¨ ğ’™_([k]) + ğ‘©(Î´ ğ’–_([k]) + ğ’–_([d]))    \
            & = ğ‘¨ ğ’™_([k]) + ğ‘© Î´ ğ’–_([k]) + (ğ‘° - ğ‘¨) ğ’™_d
$

æ„é€ å¢å¹¿çŸ©é˜µ

$
  ğ’™_(a[ k+1 ]) = vec(delim: "[", ğ’™_([k+1]), ğ’™_d) = underbrace(mat(delim: "[", ğ‘¨, ğ‘° - ğ‘¨; ğŸ, ğ‘°), "ğ‘¨â‚") vec(delim: "[", ğ’™_([k]), ğ’™_d) + underbrace(vec(delim: "[", ğ‘©, ğŸ), "ğ‘©â‚") Î´ ğ’–_([ k ])
$

ä»¤

$
  ğ’†_([k]) = ğ’™_([k]) - ğ’™_d = underbrace(mat(delim: "[", ğ‘°, -ğ‘°), "ğ‘ªâ‚") underbrace(vec(delim: "[", ğ’™_([k]), ğ’™_d), "ğ’™â‚[k]")
$

ä»£å…¥@cost-springï¼Œå¾—

$
  J &= 1 / 2 ğ’™^âŠ¤_(a[N]) ğ‘ª^âŠ¤_a ğ‘º ğ‘ª_a ğ’™_(a[N]) + 1 / 2 sum_(k=0)^(N-1) ( ğ’™^âŠ¤_(a[k]) ğ‘ª^âŠ¤_a ğ‘¸ ğ‘ª_a ğ’™_(a[k]) + Î´ ğ’–^âŠ¤_([k]) ğ‘¹ Î´ ğ’–_([k]) )
$ <cost-spring2>

è¿™å°±å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„ LQR é—®é¢˜ã€‚

#figure(
  image("images/block/lqr-trk-const.drawio.png", width: 40%),
  caption: "è½¨è¿¹è¿½è¸ª LQR ç³»ç»Ÿ",
)

== ç¨³æ€éé›¶çŸ©é˜µè¾“å…¥

å¯¹éå¸¸æ•°è¾“å…¥ï¼Œ@aug ä¸­$ğ‘¨_D â‰  ğ‘°$ã€‚æ­¤æ—¶ï¼Œå®šä¹‰è¾“å…¥å¢é‡

$ Î” ğ’–_([k]) = underbrace(ğ’–_([k]) - ğ’–_([k-1]), "å¹³æ»‘è¾“å…¥çš„å˜åŒ–") $

ä»£äºº@sys-springï¼Œå¯å¾—

$ ğ’™_([k+1]) = ğ‘¨ ğ’™_([k]) + ğ‘© ğ’–_([k]) + ğ‘© ğ’–_([k-1]) $

è®¾å¢å¹¿å‘é‡

$ ğ’™_(a[k]) = vec(delim: "[", ğ’™_([k]), ğ’™_([d]), ğ’–_([k-1])) $

äºæ˜¯

$
  ğ’†_([k]) = ğ’™_([k]) - ğ’™_d = mat(delim: "[", ğ‘°, -ğ‘°, ğŸ) vec(delim: "[", ğ’™_([k]), ğ’™_([d]), ğ’–_([k-1])) = ğ‘ª_a ğ’™_(a[k])
$

è¿›ä¸€æ­¥æœ‰

$
  ğ’™_(a[k+1]) = underbrace(mat(delim: "[", ğ‘¨, ğŸ, ğ‘©; ğŸ, ğ‘¨_D, ğŸ; ğŸ, ğŸ, ğ‘°), "ğ‘¨â‚") ğ’™_(a[ k ]) + underbrace(vec(delim: "[", ğ‘©, ğŸ, ğ‘°), "ğ‘©â‚") Î” ğ’–_([k])
$

ç±»æ¯”@cost-spring2ï¼Œå¾—

$
  J = 1 / 2 ğ’™^âŠ¤_(a[N]) ğ‘ª^âŠ¤_a ğ‘º ğ‘ª_a ğ’™_(a[N]) + 1 / 2 sum_(k=0)^(N-1) ( ğ’™^âŠ¤_(a[k]) ğ‘ª^âŠ¤_a ğ‘¸ ğ‘ª_a ğ’™_(a[k]) + Î” ğ’–^âŠ¤_([k]) ğ‘¹ Î” ğ’–_([k]) )
$

#figure(
  image("images/block/lqr-trk-var.drawio.png", width: 40%),
  caption: "ç¨³æ€éé›¶çŸ©é˜µè¾“å…¥",
)

è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡çŸ©é˜µå˜æ¢å°†è¿½è¸ªï¼ˆtrackingï¼‰è½¬æ¢ä¸ºäº†è°ƒæ§ï¼ˆregulationï¼‰ã€‚

== ç¨³æ€æ­£å¼¦å‡½æ•°è¾“å…¥

åœ¨ç¬¦åˆ Newton ç¬¬äºŒå®šå¾‹çš„ç³»ç»Ÿä¸­ï¼Œæ­£å¼¦æŒ¯åŠ¨æ˜¯çº¿æ€§ç³»ç»Ÿçš„å†…ç”Ÿç‰¹æ€§

$
         x_(1d) & = sin(Ï‰ t)                    \
         x_(2d) & = dv(x_(1d), t) = Ï‰ cos(Ï‰ t)  \
  dv(x_(2d), t) & = -Ï‰^2 sin(Ï‰ t) = -Ï‰^2 x_(1d)
$

å…¶çŸ©é˜µå½¢å¼ä¸º

$
  dv(, t) vec(delim: "[", x_(1d), x_(2d)) = underbrace(mat(delim: "[", 0, 1; -Ï‰^2, 0), ğ€_D) vec(delim: "[", x_(1d), x_(2d))
$
